<form
  [formGroup]="contactRequestForm"
  (ngSubmit)="onSubmitContactForm()"
  novalidate
  class="mx-5 d-flex flex-column fluid"
>
  <h1 class="mx-auto text-center" [ngStyle]="{ color: 'var(--primary-color)' }">
    Demande de contact
  </h1>
  <h4 class="mb-2">Merci de remplir ce formulaire</h4>
  <div class="grid fluid mt-3 ml-2">
    <div class="col-12 mb-4">
      <div class="p-inputgroup">
        <span class="p-inputgroup-addon"><i class="pi pi-user"></i></span>
        <span class="p-float-label">
          <input
            type="text"
            id="inputtext"
            pInputText
            [required]="true"
            formControlName="firstname"
            [ngClass]="{
              'ng-invalid ng-dirty':
                contactRequestForm.controls.firstname.dirty &&
                contactRequestForm.controls.firstname.invalid
            }"
          />
          <label for="inputtext">Prénom</label>
        </span>
      </div>
      <small
        class="p-error"
        *ngIf="
          contactRequestForm.controls.firstname.dirty &&
          contactRequestForm.controls.firstname.errors?.required
        "
      >
        Le prénom est requis
      </small>
    </div>
    <div class="col-12 mb-4">
      <div class="p-inputgroup">
        <span class="p-inputgroup-addon"><i class="pi pi-user"></i></span>
        <span class="p-float-label">
          <input
            type="text"
            id="inputtext"
            pInputText
            [required]="true"
            formControlName="lastname"
            [ngClass]="{
              'ng-invalid ng-dirty':
                contactRequestForm.controls.lastname.dirty &&
                contactRequestForm.controls.lastname.invalid
            }"
          />
          <label for="inputtext">Nom</label>
        </span>
      </div>
      <small
        class="p-error"
        *ngIf="
          contactRequestForm.controls.lastname.dirty &&
          contactRequestForm.controls.lastname.errors?.required
        "
      >
        Le nom est requis
      </small>
    </div>
    <div class="col-12 mb-4">
      <div class="p-inputgroup">
        <span class="p-inputgroup-addon"><i class="far fa-envelope"></i></span>
        <span class="p-float-label">
          <input
            type="email"
            id="inputtext"
            pInputText
            [required]="true"
            formControlName="email"
            [email]="true"
            [ngClass]="{
              'ng-invalid ng-dirty':
                contactRequestForm.controls.email.dirty &&
                contactRequestForm.controls.email.invalid
            }"
          />
          <label for="inputtext">Email</label>
        </span>
      </div>
      <small
        class="p-error"
        *ngIf="
          contactRequestForm.controls.email.dirty &&
          contactRequestForm.controls.email.errors?.required
        "
      >
        L'email est requis
      </small>
      <small
        class="p-error"
        *ngIf="
          contactRequestForm.controls.email.dirty &&
          contactRequestForm.controls.email.invalid &&
          !contactRequestForm.controls.email.errors?.required
        "
      >
        Format de l'email incorrect
      </small>
    </div>
    <div class="col-12 mb-4">
      <div class="p-inputgroup">
        <span class="p-inputgroup-addon"><i class="far fa-envelope"></i></span>
        <span class="p-float-label">
          <input
            type="text"
            id="inputtext"
            pInputText
            [required]="true"
            formControlName="subject"
            [ngClass]="{
              'ng-invalid ng-dirty':
                contactRequestForm.controls.subject.dirty &&
                contactRequestForm.controls.subject.invalid
            }"
          />
          <label for="inputtext">Sujet</label>
        </span>
      </div>
      <small
        class="p-error"
        *ngIf="
          contactRequestForm.controls.subject.dirty &&
          contactRequestForm.controls.subject.errors?.required
        "
      >
        Le sujet est requis
      </small>
    </div>
    <div class="col-12 mb-4">
      <div class="p-inputgroup">
        <span class="p-inputgroup-addon"><i class="pi pi-comment"></i></span>
        <span class="p-float-label">
          <textarea
            id="float-input"
            pInputTextarea
            [autoResize]="true"
            [required]="true"
            formControlName="explanation"
            style="width: 100%"
            [ngClass]="{
              'ng-invalid ng-dirty':
                contactRequestForm.controls.explanation.dirty &&
                contactRequestForm.controls.explanation.invalid
            }"
            [rows]="8"
          ></textarea>
          <label for="float-input">Description du problème</label>
        </span>
        <small
          class="p-error"
          *ngIf="
            contactRequestForm.controls.explanation.dirty &&
            contactRequestForm.controls.explanation.errors?.required
          "
        >
          La description est obligatoire
        </small>
      </div>
    </div>
    <button
      type="submit"
      class="mt-3 mx-auto text-center px-5"
      pButton
      pRipple
      label="Envoyer"
      icon="pi pi-send"
      iconPos="right"
      [disabled]="contactRequestForm.invalid"
      [loading]="sendingMail"
    ></button>
  </div>
</form>
